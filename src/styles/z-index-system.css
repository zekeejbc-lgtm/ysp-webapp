/**
 * =============================================================================
 * YSP Z-INDEX SYSTEM
 * =============================================================================
 * 
 * A systematic, organized, and aesthetic z-index hierarchy
 * Each layer is clearly defined with its purpose
 * 
 * =============================================================================
 */

:root {
  /* Base Layer (0-9) - Background elements */
  --z-background: 0;
  --z-background-overlay: 1;
  
  /* Content Layer (10-99) - Main content */
  --z-content: 10;
  --z-card: 15;
  --z-elevated-card: 20;
  
  /* UI Layer (100-199) - Interactive elements */
  --z-dropdown: 100;
  --z-sticky: 110;
  --z-header: 120;
  --z-sidebar: 130;
  
  /* Overlay Layer (200-299) - Overlays and modals */
  --z-overlay: 200;
  --z-drawer: 210;
  --z-modal-backdrop: 220;
  --z-modal: 230;
  
  /* Notification Layer (300-399) - Toasts and notifications */
  --z-notification: 300;
  --z-toast: 310;
  
  /* Critical UI (400-499) - Always-visible UI */
  --z-tooltip: 400;
  --z-popover: 410;
  
  /* Navigation Layer (500-999) - Top-level navigation */
  --z-top-bar: 500;
  --z-side-nav: 510;
  
  /* HOMEPAGE PILL - ABSOLUTE TOP (Maximum possible) */
  --z-homepage-pill: 2147483647; /* MAX 32-bit integer */
}

/* =============================================================================
 * APPLY Z-INDEX SYSTEM
 * ============================================================================= */

/* Base Layer - Background */
.ysp-card {
  z-index: var(--z-card) !important;
  position: relative;
}

/* UI Layer - Interactive elements */
.sticky {
  z-index: var(--z-sticky);
}

/* Overlay Layer - Modals and overlays */
[data-modal-backdrop] {
  z-index: var(--z-modal-backdrop);
}

[data-modal] {
  z-index: var(--z-modal);
}

/* Navigation Layer */
[data-topbar] {
  z-index: var(--z-top-bar);
}

[data-sidebar] {
  z-index: var(--z-side-nav);
}

/* =============================================================================
 * HOMEPAGE PILL - ABSOLUTE MAXIMUM Z-INDEX
 * ============================================================================= */

[data-homepage-pill-wrapper] {
  z-index: var(--z-homepage-pill) !important;
  position: fixed !important;
  top: 1rem !important;
  left: 0 !important;
  right: 0 !important;
  pointer-events: none !important;
  isolation: isolate !important;
  transform: translateZ(1000px) !important;
  will-change: transform !important;
  contain: layout !important;
  /* CRITICAL: Ensure it's on its own GPU layer */
  backface-visibility: hidden !important;
  perspective: 1000px !important;
  /* CRITICAL: Remove any parent clipping */
  clip-path: none !important;
  mask: none !important;
  /* CRITICAL: Ensure visibility */
  visibility: visible !important;
  opacity: 1 !important;
  display: flex !important;
  justify-content: center !important;
  align-items: flex-start !important;
}

[data-homepage-pill-inner] {
  z-index: var(--z-homepage-pill) !important;
  position: relative !important;
  pointer-events: auto !important;
  transform: translateZ(1000px) !important;
  /* CRITICAL: Ensure it's on its own GPU layer */
  backface-visibility: hidden !important;
  /* CRITICAL: Ensure visibility */
  visibility: visible !important;
  opacity: 1 !important;
}

/* =============================================================================
 * FORCE ALL OTHER ELEMENTS BELOW
 * ============================================================================= */

/* CRITICAL: Ensure body and root don't clip */
body,
#root,
.min-h-screen {
  overflow-x: hidden !important;
  overflow-y: visible !important;
  position: relative !important;
}

/* Prevent ANY element from creating stacking contexts that could hide pill */
*:not([data-homepage-pill-wrapper]):not([data-homepage-pill-inner]):not([data-homepage-pill-wrapper] *) {
  /* Remove isolation contexts */
  isolation: auto !important;
}

/* Specific overrides for glassmorphism elements */
[style*="backdrop-filter"]:not([data-homepage-pill-wrapper] *),
[style*="backdropFilter"]:not([data-homepage-pill-wrapper] *),
.ysp-card {
  /* Ensure they stay in their layer */
  isolation: auto !important;
  z-index: var(--z-card) !important;
}

/* =============================================================================
 * DEBUG HELPERS (Remove in production)
 * ============================================================================= */

/* Uncomment to visualize z-index layers */
/*
[data-homepage-pill-wrapper] {
  outline: 3px solid red !important;
}

[data-homepage-pill-inner] {
  outline: 2px solid blue !important;
}

.ysp-card {
  outline: 1px solid green !important;
}
*/